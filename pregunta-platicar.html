<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🌸 CajaFAT | Encuesta</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    body {font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2);
          display: flex; justify-content: center; align-items: center; height: 100vh; margin:0; overflow:hidden;}
    .card {background: white; border-radius: 22px; box-shadow: 0 10px 35px rgba(0,0,0,0.25);
           padding: 35px 30px; max-width: 420px; width: 100%; text-align: center; position:relative; z-index:2;}
    h1 {font-size: 22px; margin-bottom: 18px; color: #333;}
    .actions {display: flex; justify-content: center; gap: 14px; margin-top: 15px;}
    button {flex: 1; padding: 14px; border: none; border-radius: 14px; font-size: 16px;
            font-weight: 600; cursor: pointer; color: white; transition: all 0.25s ease-in-out;}
    button.yes {background: #34d399;} button.no {background: #f87171;}
    button:hover {transform: scale(1.07);} button:active {transform: scale(0.95);}
    .answer {margin-top: 18px; font-size: 18px; font-weight: 500; color: #374151;}
    .special {margin-top: 10px; font-size: 16px; font-weight: 600;}
    .yesMsg {color: #059669;} .noMsg {color: #dc2626;}
    .kpi {display: flex; justify-content: center; gap: 20px; margin-top: 18px;}
    .tile {background: #f3f4f6; border-radius: 12px; padding: 10px 14px; min-width: 90px;}
    .muted {font-size: 13px; color: #6b7280;} .big {font-size: 22px; font-weight: 700; color: #111827;}

    /* Animaciones flotantes */
    .floating {
      position: absolute;
      font-size: 24px;
      animation: floatUp 2s ease-out forwards;
      z-index:1;
    }
    @keyframes floatUp {
      from { opacity:1; transform: translateY(0) scale(1);}
      to { opacity:0; transform: translateY(-120px) scale(1.5);}
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>🌸 ¿Podemos seguir platicando más seguido? 😊</h1>
    <div class="actions">
      <button class="yes" id="yes">Sí</button>
      <button class="no" id="no">No</button>
    </div>
    <p id="chosen" class="answer"></p>
    <p id="special" class="special"></p>
    <div class="kpi">
      <div class="tile"><p class="muted">Total Sí</p><p id="countYes" class="big">0</p></div>
      <div class="tile"><p class="muted">Total No</p><p id="countNo" class="big">0</p></div>
    </div>
  </div>
  <script>
    (function(){
      const btnYes=document.getElementById('yes');
      const btnNo=document.getElementById('no');
      const chosen=document.getElementById('chosen');
      const special=document.getElementById('special');
      const countYes=document.getElementById('countYes');
      const countNo=document.getElementById('countNo');
      const key='cajaFAT-votes';

      function getData(){try{const d=localStorage.getItem(key);return d?JSON.parse(d):{si:0,no:0,choice:null};}catch{return{si:0,no:0,choice:null};}}
      function setData(obj){try{localStorage.setItem(key,JSON.stringify(obj));}catch{}}
      function render(){const d=getData();countYes.textContent=d.si;countNo.textContent=d.no;
        if(d.choice){chosen.textContent='Has respondido: '+(d.choice==='si'?'Sí':'No');
          if(d.choice==='si'){special.textContent='✨ ¡Me alegra que quieras seguir platicando! 🥰';special.className='special yesMsg';}
          else{special.textContent='😢 Lo entiendo, gracias por tu sinceridad.';special.className='special noMsg';}
        }else{chosen.textContent='';special.textContent='';}}

      function createFloating(icon){
        const el=document.createElement('div');
        el.className='floating';
        el.textContent=icon;
        el.style.left=(Math.random()*80+10)+'%';
        el.style.bottom='20px';
        document.body.appendChild(el);
        setTimeout(()=>el.remove(),2000);
      }

      btnYes.addEventListener('click',()=>{
        let d=getData();if(d.choice!=='si'){d.si++;}if(d.choice==='no'){d.no=Math.max(0,d.no-1);}d.choice='si';setData(d);render();
        createFloating('❤️'); createFloating('🌸');
      });
      btnNo.addEventListener('click',()=>{
        let d=getData();if(d.choice!=='no'){d.no++;}if(d.choice==='si'){d.si=Math.max(0,d.si-1);}d.choice='no';setData(d);render();
        createFloating('🥀');
      });

      render();
    })();
  </script>
</body>
</html>
